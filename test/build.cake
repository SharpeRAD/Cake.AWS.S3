#addin "Cake.AWS.S3"

//////////////////////////////////////////////////////////////////////
// ARGUMENTS
//////////////////////////////////////////////////////////////////////

var target = Argument("target", "Default");
var configuration = Argument("configuration", "Release");



///////////////////////////////////////////////////////////////////////////////
// TASK DEFINITIONS
///////////////////////////////////////////////////////////////////////////////

Task("Upload-File")
    .Description("Upload a file from S3")
    .Does(() =>
{
    S3Upload("C:/Files/test.zip", "test.zip", Context.CreateUploadSettings()
    {
        BucketName = "cake-s3"
    });
});

Task("Download-File")
    .IsDependentOn("Upload-File")
    .Description("Download a file from S3")
    .Does(() =>
{
    S3Download("C:/Files/test.zip", "test.zip", Context.CreateDownloadSettings()
    {
        BucketName = "cake-s3"
    });
});



//////////////////////////////////////////////////////////////////////
// TASK TARGETS
//////////////////////////////////////////////////////////////////////

Task("Default")
    .IsDependentOn("Download-File");



///////////////////////////////////////////////////////////////////////////////
// EXECUTION
///////////////////////////////////////////////////////////////////////////////

RunTarget(target);